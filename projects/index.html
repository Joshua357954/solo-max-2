<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="./style.css">
	<title>Courses</title>
	<link rel="icon" href="../assets/images/favicon.ico">
</head>

<body>

<nav class="navbar">
	<div class="navbar_box">

		<div class="nav_img_box">
			<a href="../index.html"><img class='logo' src="../assets/images/so-max_Renew.png
			"></a>
		</div>
		
		<div class="navlinks_box">
			
			<img class="navmenu-icon" src="../assets/images/menu (3).svg">
			
			<ul class="nvb">
				<a class="li" href="../index.html">
					    <li class="ls">
					        <img class="li-img" src="../assets/images/new_home.svg">
					        <p>Home</p>
					    </li>
					</a>

				    <a class="li" href="../blog/index.html">
				        <li class="ls">
				            <img class="li-img reduce" src="../assets/images/new_blog.svg">
				            <p>Blog</p>
				        </li>
				    </a>

				  	<a class="li" href="../about/index.html">
				        <li class="ls">
				            <img class="li-img" src="../assets/images/new_about.svg">
				            <p>About</p>
				        </li>
				    </a>

					<a class="li" href="../services/index.html">
				        <li class="ls">
				            <img class="li-img" src="../assets/images/new_services.svg">
				            <p>Services</p>
				        </li>
				    </a>


				    <a class="li" id="projects">
				        <li class="ls">
				           <img class="li-img" src="../assets/images/new_courses.svg">
				           
				           <p class="li" href="#">Courses 
					           	<img class="caret" src="../assets/images/car-d (3).svg">
				           </p>					
				        </li>
				    </a>

			</ul>
		</div>
	</div>


		<div class="context-menu" id="contextMenu">
		    <ul>
		        <li>
		        	<a href="./index.html?course_type=youtube" style="display: flex; align-items:center; ">Youtube <img style="margin-left: 10px;" class="li-img" src="../assets/images/youtube-you-tube-video-svgrepo-com.svg"></a>
		        </li>

		        <li>
		        	<a href="./index.html?course_type=premium"  style="display: flex; align-items:center">Premium <img style="margin-left: 10px;" class="li-img" src="../assets/images/new_premium.svg"></a>
		        </li>

		        <li>
		        	<a href="./index.html"  style="display: flex; align-items:center">Mentorship <img style="margin-left: 10px;" class="li-img" src="../assets/images/new_mentor.svg"></a>
		        </li>
		        <!-- <li><a href="./projects/index.html">Arch Viz</a></li> -->
		    </ul>
		</div>
</nav>




<section class="courses_header">
	<div class="header_title">
		<img class="csh_img" src="">
		<h1 class="h1">&nbsp;</h1>
	</div>
	<!-- <p>These courses are to make you grow and advance your skills but if they are not good enough , Check other category of courses </p>
 -->

</section>


<!-- Cards ..... -->
<main class="courses_box">
	

</main>
 


<!-- Footer -->
     <footer>
        <div class="footer-content">
            <!-- <div class="footer-logo">
                <img src="../assets/images/solo-pix.png" alt="Animation Studio Logo">
            </div> -->
            <div class="footer-links">
            	<h3>Quick Links</h3>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="blog/index.html">Blog</a></li>
                    <li><a href="#services">Services</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            <div class="footer-info">
                <h3>Contact Us</h3>
                <p>
                   124 Chief Worlu Street<br>Portharcourt City, PH 9858<br>
                    <b>Email:</b> 
                    <a class="code" href="mailto:info@solomaxstudio.com">info@solomaxstudio.com</a><br>
                    <b>Phone:</b> <a class="code" href="tel:09034533840">(+234) 903 4533 840</a>
                </p>
            </div>
            <div class="footer-social">
                <h3>Follow Us</h3>
                <ul>
                    
                    <li><a href="https://behance.net/solomaxstudios" target="blank" class="social-icon"><img src="../assets/images/behance-color-svgrepo-com.svg"></a>
                    </li>

                    <li><a href="https://instagram.com/Solomaxstudios" class="social-icon" target="blank" ><img src="../assets/images/instagram-2016-logo-svgrepo-com.svg"></a></li>
                    
                    <li>
                    	<a href="https://linkedin.com/company/solomax-studios" target="blank"class="social-icon"><img src="../assets/images/linkedin (1).svg">
                    	</a>
                    </li>
                    
                    <li><a href="https://youtube.com/@Solomaxstudios" target="blank" class="social-icon"><img src="../assets/images/youtube-you-tube-video-svgrepo-com.svg"></a>
                    </li>


                </ul>
            </div>
        </div>
    </footer>
	

	<footer class="footer-2" >
		&copy;  SoloMax - Studios <span style="margin-left: 7px" id="current-year"></span>
	</footer>



<script src="../mdParser.js" async></script>

<script>

const currentYear = new Date().getFullYear();

// Update the content of the "current-year" span
document.getElementById('current-year').innerText = currentYear;

var item3 = document.getElementById("projects");
var contextMenu = document.getElementById("contextMenu");

item3.addEventListener("mouseenter", function () {
    showContextMenu();
});

item3.addEventListener("mouseleave", function () {
    hideContextMenu();
});

contextMenu.addEventListener("mouseenter", function () {
    showContextMenu();
});

contextMenu.addEventListener("mouseleave", function () {
    hideContextMenu();
});

function showContextMenu() {

    var rect = item3.getBoundingClientRect();
    contextMenu.style.display = "block";
    contextMenu.style.left = rect.left + "px";
    contextMenu.style.top = rect.bottom + "px";
}

function hideContextMenu() {
    contextMenu.style.display = "none";
}


// Nav Menu
const nav_icon = document.querySelector('.navmenu-icon') 
	const mobile_nav1 = document.querySelector('.navlinks_box')
	const mobile_nav = document.querySelector('.nvb')
	const navbar =  document.querySelector('.navbar')

	nav_icon.addEventListener('click',() => {	
		mobile_nav.classList.toggle('active')

		if (mobile_nav.classList.contains('active')){
			// navbar.style.height = '100vh';
		    nav_icon.src = '../assets/images/close-svgrepo-com.svg' 
		    // navbar.style.backgroundColor = 'red';
		}
		else{
			// navbar.style.height = '70px';
		    nav_icon.src = '../assets/images/menu (3).svg';
		}
	} )

	let prevScrollPos = window.pageYOffset;
	const windowWidth = window.innerWidth


	window.onscroll = function() {
	    const currentScrollPos = window.pageYOffset;
	    const navbar = document.querySelector(".navbar");
	    const li = document.querySelectorAll(".li");
	    const logo = document.querySelector(".logo")

	    

	    if (prevScrollPos > currentScrollPos) {
	        // Scrolling up
	    } else {
	        // Scrolling down

	        if (!mobile_nav.classList.contains('active')){
	        	 // nav_icon.style.display = 'none'
	        	 // alert("does not")
	        }

	           navbar.style.top = "0";
	        navbar.classList.add('bg-white')

	        // logo.src = "./assets/images/solomax.png"

	        // change text color while scrolling up
	        li.forEach(el => {
				el.style.color = 'black'
	        })

	    }

	    prevScrollPos = currentScrollPos;
	};

	const paramName = 'course_type'
	const currentUrl = window.location.href;

    // Create a URL object from the current URL
    const url = new URL(currentUrl);

    // Get all query parameters
    const queryParams = url.searchParams;


    const youtubeImg = '../assets/images/youtube-you-tube-video-svgrepo-com.svg'

    const premiumImg = '../assets/images/new_premium.svg'

    const mentorshipImg = '../assets/images/new_mentor.svg'

	// Get the value of a specific parameter, for example, 'param1'
	const paramValue = queryParams.get(paramName);
	const pageName = document.querySelector('.h1')
	const pageImg =  document.querySelector('.csh_img')


	// Inject Header Title
	const selectionContent = `	
		<section class="headerNav">
			<img  class="li-img" src="../assets/images/search-svgrepo-com.svg">

			<ul class="selection">
				<li onClick="filterCourses('all')">All</li>
				<li>Latest</li>
			</ul>

			<div class="filter">
			    <img class="li-img" src="../assets/images/filter-list-svgrepo-com.svg" alt="Filter Icon">
			 
				<select id="dropdownSelect">
					<option value="" disabled selected>Filter By:</option>
				</select>
			</div>

		</section>`


	const coursesBox = document.querySelector('.courses_box')


// -------------- Work has started here ----------------		
// -------------- Work has started here ----------------
// -------------- Work has started here ----------------

   
    // const dropdownSelect = document.getElementById('dropdownSelect');
   

    async function fetchAndLoadContent(folder) {
	  const repositoryOwner = 'Joshua357954';
	  const repositoryName = 'solo-max-2';
	  const folderPath = `content/${folder}`;

	  try {
	    // Fetch file details from the GitHub repository
	    const response = await fetch(`https://api.github.com/repos/${repositoryOwner}/${repositoryName}/contents/${folderPath}`);

	    // Parse the response as JSON
	    const data = await response.json();

	    // Use Promise.all to concurrently load content from all files
	    const fileDetails = await Promise.all(data.map(async file => {
	      try {
	        // Fetch the content of the file
	        const contentResponse = await fetch(`../content/${folder}/${file.name}`);
	        const markdownContent = await contentResponse.text();

	        // Parse the markdown content using the MdParser class
	        const markDParser = new MdParser(markdownContent);

	        // Return an object containing both file details, front matter, and body
	        return {
	          fileName: file.name,
	          frontMatter: markDParser.getFrontmatter()
	        };
	      } catch (contentError) {
	        console.error('Error fetching content:', contentError);

	        // Return an object with error details in case of an error
	        return {
	          fileDetails: file,
	          frontMatter: {},
	          body: '',
	          error: contentError
	        };
	      }
	    }));

	    // Log the details of loaded files
	    // console.log('Files Details:', fileDetails);
	    return fileDetails;
	  } catch (error) {
	    console.error('Error fetching file list:', error);

	    // Return an empty array in case of an error
	    return [];
	  }
	}


	let catData ;

	//  Filter Categories
	async function filterCourses(selectedCategory) {
	    coursesBox.innerHTML = '';
	    
	    console.log('Filtering Post')


	    // ===== Sort Data By Category ======
	    const coursesData = await fetchAndLoadContent(`${paramValue}Courses`)
	    const filteredCourses = coursesData.filter(post => {
		    return lower(selectedCategory) === 'all' || lower(post.frontMatter.category) === lower(selectedCategory);
			});

	    console.log(coursesData[0])
	    console.log(filteredCourses)


	    // ======= Insert The Course Cards ========
	    filteredCourses.forEach(course => {
	        	
			let courseCard = lower(paramValue) == 'youtube' ?	`
				<div class="yt-card">
					<div class="yt_video"><iframe width="100%" height="100%" src="${course.frontMatter.ytLink}" frameborder="0" allowfullscreen></iframe>
					</div>
					<strong style="color:black;">${course.frontMatter.category}</strong>
					<h2>${course.frontMatter.title}</h2>
					<p>${course.frontMatter.description}
					</p>
				</div>` 
				: 
				 `
				<div class="premium_card">
					<div class="premium_box1">
						<img src="${course.frontMatter.imgUrl}" width="100%" height="100%" >
					</div>

					<div class="premium_box2">
						<h2>${course.frontMatter.title}</h2>
						
						
						<p class="p_category">${course.frontMatter.category}</p>

						<strong class="p_price">${course.frontMatter.price}</strong>
						<button class="pbtn"> <img class="li-img" src="../assets/images/new_courses.svg">Watch Demo</button>
						<button class="pbtn">Buy Now</button>
					</div>
				</div>`

				
				//======== Load Dynamic Categories =========

		    if (!catData){
		    	// dropdownSelect.innerHTML = ""
		    	const categoryData = [...new Set(coursesData.map(post => post.frontMatter.category))]
		    	categoryData.forEach(category => {
				    const option = document.createElement('option');
				    option.value = category.trim();
				    option.innerText = category;
				    console.log(dropdownSelect)
				    dropdownSelect.appendChild(option);
				});
				catData = true
		    
				dropdownSelect.addEventListener('change', function () {
				const selectedOption = dropdownSelect.value;
					filterCourses(lower(selectedOption));
				});
			}
			// Append the new content using insertAdjacentHTML
			coursesBox.insertAdjacentHTML('beforeend', courseCard);


		
	    });

	}

		const lower = (word) => word.toLowerCase()

	// -------------- Work has started here ----------------		
	// -------------- Work has started here ----------------
	// -------------- Work has started here ----------------



	const selectionBox = document.querySelector('.courses_header')
	const isMentorship = paramValue != 'youtube' && paramValue != 'premium'
	
	if (isMentorship){
		selectionBox.style.border = 'none'
		pageName.innerText = "Mentorship"
	
	}else {
		selectionBox.insertAdjacentHTML('beforeend', selectionContent)
		pageName.innerText = `${paramValue} Courses`
	}
	
	// Inject Header Img
	pageImg.src = paramValue == 'youtube' ? youtubeImg : paramValue=='premium' ? premiumImg : mentorshipImg



	//  =================== YT/ Premium  Courses =====================
	//  =================== YT/ Premium   Courses =====================
	//  =================== YT/ Premium  Courses======================
	// Inject Courses Content 
	if (!isMentorship) {

		filterCourses('all')


	}else {
		//  =================== Mentorship =====================
		//  =================== Mentorship =====================
		//  =================== Mentorship =====================
		const coursesBox = document.querySelector('.courses_header')
		coursesBox.insertAdjacentHTML('beforeend',
			`<section class="mentorship_box">
				<h7>Unlock Your potential with personalised Mentorship ☃️ !</h7>
				<p>Our seasoned mentors are ready to guide you on your journey. Whether you're navigating your career, mastering new skills, or pursuing personal growth, our mentorship program provides personalized support🚀. Connect with mentors who share your passions and let's embark on this transformative journey together. Elevate your life—begin your mentorship experience now! 🌟.</p>

				<a href="/">Get In Touch</a>
		</section>`)

	}



</script>
</body>
</html>